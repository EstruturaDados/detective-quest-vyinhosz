#include <stdio.h>
#include <stdlib.h>
#include <string.h>

/* ============================================================
====   ESTRUTURAS DO N√çVEL AVENTUREIRO   ===================
============================================================ */

/* ------------- √Årvore Bin√°ria (Mans√£o) -------------- */
typedef struct Sala {
char nome[50];
char pista[50];    // pista opcional ("" se n√£o houver)
struct Sala *esq;
struct Sala *dir;
} Sala;

/* ------------- √Årvore de Busca (BST de pistas) ------- */
typedef struct NodoBST {
char pista[50];
struct NodoBST *esq;
struct NodoBST *dir;
} NodoBST;

/* ============================================================
====   FUN√á√ïES DA MANS√ÉO (√ÅRVORE BIN√ÅRIA)   ================
============================================================ */

Sala* criarSala(const char* nome, const char* pista) {
Sala* nova = (Sala*) malloc(sizeof(Sala));
strcpy(nova->nome, nome);
strcpy(nova->pista, pista);
nova->esq = nova->dir = NULL;
return nova;
}

/* ============================================================
====   FUN√á√ïES DA BST (√ÅRVORE DE BUSCA DAS PISTAS)   ========
============================================================ */

NodoBST* inserirBST(NodoBST* raiz, const char* pista) {
if (raiz == NULL) {
NodoBST* novo = (NodoBST*) malloc(sizeof(NodoBST));
strcpy(novo->pista, pista);
novo->esq = novo->dir = NULL;
return novo;
}
if (strcmp(pista, raiz->pista) < 0)
raiz->esq = inserirBST(raiz->esq, pista);
else if (strcmp(pista, raiz->pista) > 0)
raiz->dir = inserirBST(raiz->dir, pista);

```
return raiz;
```

}

int buscarBST(NodoBST* raiz, const char* pista) {
if (raiz == NULL) return 0;
int cmp = strcmp(pista, raiz->pista);
if (cmp == 0) return 1;
if (cmp < 0)  return buscarBST(raiz->esq, pista);
return buscarBST(raiz->dir, pista);
}

void emOrdemBST(NodoBST* raiz) {
if (raiz == NULL) return;
emOrdemBST(raiz->esq);
printf(" - %s\n", raiz->pista);
emOrdemBST(raiz->dir);
}

/* ============================================================
====   MEC√ÇNICA DO JOGO: EXPLORA√á√ÉO DA MANS√ÉO   =============
============================================================ */

void explorarSalas(Sala* atual, NodoBST** pistas) {
char escolha;

```
while (atual != NULL) {
    printf("\nVoc√™ est√° na sala: %s\n", atual->nome);

    if (strlen(atual->pista) > 0) {
        if (!buscarBST(*pistas, atual->pista)) {
            printf("üîç Voc√™ encontrou uma pista: %s\n", atual->pista);
            *pistas = inserirBST(*pistas, atual->pista);
        }
    }

    printf("Escolha:\n");
    printf("  e - ir para a esquerda\n");
    printf("  d - ir para a direita\n");
    printf("  s - sair da explora√ß√£o\n");
    printf("> ");
    scanf(" %c", &escolha);

    if (escolha == 'e')
        atual = atual->esq;
    else if (escolha == 'd')
        atual = atual->dir;
    else if (escolha == 's')
        break;
    else
        printf("Op√ß√£o inv√°lida!\n");
}
```

}

/* ============================================================
====   FUN√á√ÉO PRINCIPAL   ==================================
============================================================ */

int main() {
NodoBST* pistas = NULL;

```
/* ----- Criando a Mans√£o (est√°tica) ----- */

Sala* hall = criarSala("Hall de Entrada", "");
Sala* corredor = criarSala("Corredor Principal", "Mancha estranha no ch√£o");
Sala* biblioteca = criarSala("Biblioteca", "P√°gina rasgada de di√°rio");
Sala* cozinha = criarSala("Cozinha", "");
Sala* porao = criarSala("Por√£o", "Chave enferrujada");
Sala* jardim = criarSala("Jardim", "");

hall->esq = corredor;
hall->dir = biblioteca;

corredor->esq = cozinha;
corredor->dir = porao;

biblioteca->dir = jardim;

/* ----- Loop de Menu ----- */
int opc;
do {
    printf("\n====== MANS√ÉO SOMBRIA ‚Äî N√çVEL AVENTUREIRO ======\n");
    printf("1 - Explorar salas\n");
    printf("2 - Ver pistas coletadas\n");
    printf("0 - Sair\n");
    printf("Escolha: ");
    scanf("%d", &opc);

    switch (opc) {
        case 1:
            explorarSalas(hall, &pistas);
            break;
        case 2:
            printf("\nüìú Pistas coletadas (ordem alfab√©tica):\n");
            emOrdemBST(pistas);
            break;
        case 0:
            printf("Saindo...\n");
            break;
        default:
            printf("Op√ß√£o inv√°lida!\n");
    }
} while (opc != 0);

return 0;
```

}
