#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// ----------- Estrutura do nÃ³ (sala da mansÃ£o) -------------
typedef struct Sala {
    char nome[50];
    struct Sala* esquerda;
    struct Sala* direita;
} Sala;

// ----------- Cria dinamicamente uma sala -------------------
Sala* criarSala(const char* nome) {
    Sala* s = (Sala*)malloc(sizeof(Sala));
    strcpy(s->nome, nome);
    s->esquerda = NULL;
    s->direita = NULL;
    return s;
}

// ----------- ExploraÃ§Ã£o interativa da mansÃ£o ---------------
void explorarSalas(Sala* atual) {
    char opcao;

    while (atual != NULL) {
        printf("\nğŸ“ VocÃª estÃ¡ na sala: **%s**\n", atual->nome);

        // Se chegou num nÃ³-folha, acabou o caminho
        if (atual->esquerda == NULL && atual->direita == NULL) {
            printf("ğŸšª NÃ£o hÃ¡ mais portas. Fim do caminho!\n");
            return;
        }

        printf("Para onde deseja ir?\n");
        if (atual->esquerda != NULL) printf("  (e) Esquerda â†’ %s\n", atual->esquerda->nome);
        if (atual->direita != NULL) printf("  (d) Direita â†’ %s\n", atual->direita->nome);
        printf("  (s) Sair da exploraÃ§Ã£o\n");
        printf("Escolha: ");
        scanf(" %c", &opcao);

        if (opcao == 'e' && atual->esquerda != NULL) {
            atual = atual->esquerda;
        } 
        else if (opcao == 'd' && atual->direita != NULL) {
            atual = atual->direita;
        } 
        else if (opcao == 's') {
            printf("\nğŸ‘‹ VocÃª decidiu sair da mansÃ£o.\n");
            return;
        } 
        else {
            printf("\nâŒ Caminho invÃ¡lido! Tente novamente.\n");
        }
    }
}

int main() {
    // ----------- CRIAÃ‡ÃƒO DA ÃRVORE (MAPA) ----------------
    // MansÃ£o exemplo:
    //
    //                    Hall de Entrada
    //                   /                \
    //            Sala de Estar        Corredor
    //            /         \          /         \
    //      Biblioteca     Cozinha   Quarto     PorÃ£o

    Sala* hall = criarSala("Hall de Entrada");

    hall->esquerda = criarSala("Sala de Estar");
    hall->direita  = criarSala("Corredor");

    hall->esquerda->esquerda = criarSala("Biblioteca");
    hall->esquerda->direita  = criarSala("Cozinha");

    hall->direita->esquerda = criarSala("Quarto");
    hall->direita->direita  = criarSala("PorÃ£o");

    // ----------- EXPLORAÃ‡ÃƒO ------------------------------
    printf("ğŸ° Bem-vindo Ã  MansÃ£o Sombria!\n");
    explorarSalas(hall);

    printf("\nğŸ Fim do jogo!\n");

    return 0;
}
